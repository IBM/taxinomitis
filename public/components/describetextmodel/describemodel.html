<div ng-if="!isAuthenticated">
    <div class="alert alert-warning pageheadermsg">
        <strong translate="ERRORS.NOTLOGGEDIN"></strong>
    </div>
    <div class="text-center">
        <button class="btn btn-primary" ng-click="vm.authService.login()" translate="APP.LOGIN"></button>
    </div>
</div>
<div ng-if="isAuthenticated && !projectId" class="alert alert-danger pageheadermsg">
    <strong translate="APP.ERROR"></strong> <span translate="ERRORS.MISSINGPROJECTID"></span> <a ui-sref="projects" translate="APP.PROJECTS"></a>
</div>
<div ng-if="isAuthenticated && projectId" class="describemlmodel">
    <div class="jumbotron">
        <h2 class="text-center" translate="DESCRIBEMODEL.TITLE"></h2>
    </div>
    <div class="backbutton">
        <a ui-sref="mlproject_models({ projectId : projectId, userId : userId })" translate="APP.BACKTOMODEL"></a>
    </div>

    <div ng-repeat="error in vm.errors"
         class="alert alert-danger alert-dismissible pageheadermsg" role="alert"
         ng-click="vm.dismissAlert('errors', $index)"
         id="errors{{error.alertid}}">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <strong>Sorry! This is a new page and I still have some bits left to fix...</strong><br/><br/>
        <strong translate="APP.ERROR"></strong> {{ error.message }}<br/>
        <em ng-if="error.status >= 500"><span translate="ERRORS.IFPERSISTENT"></span> <a ui-sref="help" translate="ERRORS.LETMEKNOW"></a></em>
    </div>
    <div ng-repeat="warning in vm.warnings" class="alert alert-warning alert-dismissible pageheadermsg" role="alert" ng-click="vm.dismissAlert('warnings', $index)">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <strong translate="APP.WARNING"></strong> {{ warning.message }}
    </div>

    <div class="describeintro" style="display: flex; padding-bottom: 0" ng-switch="vm.wizardPage">
        <div class="nnexplanation" ng-switch-when="1">
            <div class="bodytext">The type of machine learning model that you have trained is called a neural network. </div>
            <div class="bodytext">This page is an interactive guide to explain how your model was created.</div>
            <div class="bodytext">The diagrams we'll use aren't an exact description of your model. Your model is much more complicated, but simplified diagrams make it easier to explain the ideas.</div>
        </div>
        <div class="nnexplanation" ng-switch-when="2">
            <div class="bodytext">The model is made up of a series of nodes, arranged in these vertical layers.</div>
            <div class="bodytext">If you build your own machine learning model, you need to choose how many layers to use, and how many nodes to include in each layer. </div>
            <div class="bodytext">Models with a lot of layers are described as "deep".</div>
            <div class="bodytext">Larger models can give better results, but take longer to train. </div>
        </div>
        <div class="nnexplanation" ng-switch-when="3">
            <div class="bodytext">Let's start with one of the training examples used to create your model.</div>
            <div class="bodytext">For this diagram, the input is shown on the left, and we'll move through the model to the results on the right.</div>
        </div>
        <div class="nnexplanation" ng-switch-when="4">
            <div class="bodytext">To use your training example to train the model, first the text needs to be turned into a series of numbers. </div>
            <div class="bodytext">There are lots of ways to do this, and if you build your own machine learning model, you have to choose a way that will work well for your particular project.</div>
        </div>
        <div class="nnexplanation" ng-switch-when="5">
            <div class="bodytext">For example, a simple way of turning your text into numbers is to make each number a count of how many times each word is included.</div>
            <div class="bodytext">This is quick and easy to do, but it's not good for projects where the order of words in the text is important.</div>
        </div>
        <div class="nnexplanation" ng-switch-when="6">
            <div class="bodytext">If the order of words is important, you can... FILL IN THIS</div>
        </div>
        <div class="nnexplanation" ng-switch-when="7">
            <div class="bodytext">If you build your own machine learning model, you need to choose the method to use to turn the input text into numbers. </div>
            <div class="bodytext">You can do this based on what you know will work best for the type of project you are doing, or you can do it by experimenting with different techniques to see which works the best with your training examples.</div>
            <div class="bodytext">The encoding method for your model was chosen for you based on what seemed to work best with your training examples.</div>
        </div>
        <div class="nnexplanation" ng-switch-when="8">
            <div class="bodytext">The numbers from the input layer are used in sums to calculate values for the nodes in the next layer along.</div>
            <div class="bodytext">The lines on the diagram show you which of the input values are used to calculate the value in the next layer. </div>
        </div>
        <div class="nnexplanation" ng-switch-when="9">
            <div class="bodytext">There are lots of different types of calculation you can use. Not every node in the model needs to use the same type.</div>
            <div class="bodytext">If you build your own machine learning model, you need to choose which equations to use for each node.</div>
            <div class="bodytext">For example, you could sum all of the input values together, and then add an extra value.</div>
            <div class="bodytext">The functions to use for each node in your model were chosen for you based on what seemed to work best with your training examples.</div>
        </div>
        <div class="nnexplanation" ng-switch-when="10">
            <div class="bodytext">Each arrow in the diagram has a "weight" number that is also used in the sum.</div>
            <div class="bodytext">Training the model is how we work out the right number to put on each arrow, as you'll see in a moment.</div>
        </div>
        <div class="nnexplanation" ng-switch-when="11">
            <div class="bodytext">This continues through the rest of the model. </div>
            <div class="bodytext">Each node in the model has its own equation function. Each arrow has its own weight.</div>
            <div class="bodytext">If you build your own machine learning model, you need to choose how many nodes to put in each layer, which functions to use in them, and how many layers to use.</div>
        </div>
        <div class="nnexplanation" ng-switch-when="12">
            <div class="bodytext">The final layer gives us the machine learning model's prediction.</div>
            <div class="bodytext">There is a node for each buckets you added to your training data.</div>
        </div>
        <div class="nnexplanation" ng-switch-when="13">
            <div class="bodytext">Results from the output layer are compared with the correct answer (the training bucket you put this example in).</div>
            <div class="bodytext">This is used to work out how well the machine learning model did at this.Â </div>
        </div>
        <div class="nnexplanation" ng-switch-when="14">
            <div class="bodytext">We use this error rate to go backwards through the layers and nudge the numbers associated with each of the arrows.</div>
            <div class="bodytext">Each weight number is increased a little bit or decreased a little bit, depending on what would've made that error a little smaller.</div>
        </div>

        <div class="nnsearchbox">
            <div class="nnsearchprompt">for more detail, try searching for:</div>
            <div class="nnsearchterm">
                <a target="_blank" href="{{ vm.searchBoxLinks[vm.wizardPage] }}">
                    <span ng-switch-when="1">neural networks</span>
                    <span ng-switch-when="2">deep learning</span>
                    <span ng-switch-when="3">input layer</span>
                    <span ng-switch-when="4">encoding</span>
                    <span ng-switch-when="5">bag of words</span>
                    <span ng-switch-when="6">word embedding</span>
                    <span ng-switch-when="7">feature selection</span>
                    <span ng-switch-when="8">hidden layer</span>
                    <span ng-switch-when="9">activation functions</span>
                    <span ng-switch-when="10">weight <small>and</small> bias</span>
                    <span ng-switch-when="11">hidden layer</span>
                    <span ng-switch-when="12">output layer</span>
                    <span ng-switch-when="13">loss function</span>
                    <span ng-switch-when="14">back propagation</span>
                </a>
            </div>
        </div>
    </div>

    <div ng-hide="loading" class="nnwizardaction">
        <button class="btn btn-default" ng-disabled="vm.wizardPage < 2" ng-click="vm.previousPage()">&lt; Back</button>
        <button class="btn btn-primary" ng-disabled="false"             ng-click="vm.nextPage()">Next &gt;</button>
    </div>

    <div ng-if="loading" class="loading"> </div>

    <div ng-if="!loading && modelinfo">
        <div class="visualisationpage">
            <div id="mlforkidsmodelvizimghost" class="visualisationimagehost">
                <div id="mlforkidsmodelvizimg">

                </div>
            </div>
            <div class="sidepanel">
                <div class="btn-group btn-group-lg" role="group">
                    <div type="button" class="btn btn-default glyphicon glyphicon-zoom-out" ng-mousedown="vm.shrink()" ng-mouseup="vm.stop()" ng-mouseleave="vm.stop()"></div>
                    <div type="button" class="btn btn-default glyphicon glyphicon-zoom-in" ng-mousedown="vm.grow()" ng-mouseup="vm.stop()" ng-mouseleave="vm.stop()"></div>
                </div>

                <div class="btn-group btn-group-lg" role="group">
                    <div class="btn btn-default glyphicon glyphicon-arrow-left" ng-mousedown="vm.goleft()" ng-mouseup="vm.stop()" ng-mouseleave="vm.stop()"></div>
                    <div class="btn btn-default glyphicon glyphicon-arrow-up" ng-mousedown="vm.goup()" ng-mouseup="vm.stop()" ng-mouseleave="vm.stop()"></div>
                    <div class="btn btn-default glyphicon glyphicon-arrow-down" ng-mousedown="vm.godown()" ng-mouseup="vm.stop()" ng-mouseleave="vm.stop()"></div>
                    <div class="btn btn-default glyphicon glyphicon-arrow-right" ng-mousedown="vm.goright()" ng-mouseup="vm.stop()" ng-mouseleave="vm.stop()"></div>
                </div>

                <div style="margin-top: 40px; margin-bottom: 5px;">Use these controls to navigate the model diagrams</div>

                <div>DEBUG : {{ vm.wizardPage }}</div>
            </div>
        </div>
    </div>
    <div ng-if="!loading && project.type!=='text'">error placeholder</div>
</div>

