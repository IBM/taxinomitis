<div class="mllinechart-container">
    <div class="mllinechart-title" ng-if="title">{{title}}</div>

    <svg ng-if="ready"
         class="mllinechart-svg"
         viewBox="0 0 800 500"
         preserveAspectRatio="xMidYMid meet">

        <!-- Chart background -->
        <rect x="80"
              y="10"
              width="680"
              height="370"
              class="mllinechart-background"/>

        <!-- Grid lines (horizontal) -->
        <g class="mllinechart-grid">
            <line ng-repeat="label in yAxisLabels"
                  x1="80"
                  ng-attr-y1="{{10 + label.y}}"
                  x2="760"
                  ng-attr-y2="{{10 + label.y}}"
                  class="mllinechart-grid-line"/>
        </g>

        <!-- Y-axis -->
        <line x1="80"
              y1="10"
              x2="80"
              y2="380"
              class="mllinechart-axis"/>

        <!-- X-axis -->
        <line x1="80"
              y1="380"
              x2="760"
              y2="380"
              class="mllinechart-axis"/>

        <!-- Y-axis labels -->
        <g class="mllinechart-y-labels">
            <text ng-repeat="label in yAxisLabels"
                  x="70"
                  ng-attr-y="{{10 + label.y}}"
                  class="mllinechart-axis-label"
                  text-anchor="end"
                  dominant-baseline="middle">{{label.value}}</text>
        </g>

        <!-- X-axis labels -->
        <g class="mllinechart-x-labels">
            <text ng-repeat="label in xAxisLabels"
                  ng-attr-x="{{80 + label.x}}"
                  y="400"
                  class="mllinechart-axis-label"
                  text-anchor="middle">{{label.value}}</text>
        </g>

        <!-- Y-axis title -->
        <text ng-if="ylabel"
              x="20"
              y="195"
              class="mllinechart-axis-title"
              text-anchor="middle"
              transform="rotate(-90, 20, 195)">{{ylabel}}</text>

        <!-- X-axis title -->
        <text ng-if="xlabel"
              x="420"
              y="430"
              class="mllinechart-axis-title"
              text-anchor="middle">{{xlabel}}</text>

        <!-- Validation loss line (drawn first so training line is on top) -->
        <path ng-if="hasValidation"
              ng-attr-d="{{validationPath}}"
              class="mllinechart-line mllinechart-validation-line"
              transform="translate(80, 10)"/>

        <!-- Training loss line -->
        <path ng-attr-d="{{trainingPath}}"
              class="mllinechart-line mllinechart-training-line"
              transform="translate(80, 10)"/>

        <!-- Legend  -->
        <g class="mllinechart-legend" ng-attr-transform="translate({{80 + (hasValidation ? 190 : 265)}}, 460)">
            <!-- Training loss legend item -->
            <line x1="0" y1="0" x2="30" y2="0" class="mllinechart-line mllinechart-training-line"/>
            <text x="35" y="0" class="mllinechart-legend-label" dominant-baseline="middle">Training Loss</text>
            <text x="35" y="15" class="mllinechart-legend-value" dominant-baseline="middle">{{finalTrainingLoss}}</text>

            <!-- Validation loss legend item -->
            <g ng-if="hasValidation">
                <line x1="150" y1="0" x2="180" y2="0" class="mllinechart-line mllinechart-validation-line"/>
                <text x="185" y="0" class="mllinechart-legend-label" dominant-baseline="middle">Validation Loss</text>
                <text x="185" y="15" class="mllinechart-legend-value" dominant-baseline="middle">{{finalValidationLoss}}</text>
            </g>
        </g>
    </svg>

    <div ng-hide="ready" class="mllinechart-loading">
        Loading chart...
    </div>
</div>
